@import url(./mathfont.css);
.eqn_font() {
	font-family: "Math-Text", "Math-Symbol", "Tinos", "Linux Libertine", "Times New Roman", serif;

	// I turned off lnum numbers in Chrome due to a Chrome bug:
	// when font-feature-settings is on, unicode-range of
	// @font-face's will fail. It is fixed in Nov 20, 2013, but
	// I have to wait for newer version of Chrome.
	-webkit-font-feature-settings: normal;
	text-rendering: optimizeSpeed;
}
.eqn_op_font() {
	font-family: "Math-Symbol", "Math-Text", "Tinos", "Linux Libertine", "Times New Roman", serif;

	// I turned off lnum numbers in Chrome due to a Chrome bug:
	// when font-feature-settings is on, unicode-range of
	// @font-face's will fail. It is fixed in Nov 20, 2013, but
	// I have to wait for newer version of Chrome.
	-webkit-font-feature-settings: normal;
	text-rendering: optimizeSpeed;
}
// equations
.eqn {
	line-height: 1.2;
	-webkit-font-feature-settings: normal;

	// Chrome bug workaround.
	var {
		-webkit-font-feature-settings: "lnum";
		&.nm {
			font-style: normal;
		}
	}

	i, op, sp, e, frac, num, den, fdv, hd, sg, ss, ssi, sc, bo, sqrt, sk, ei {font-style: normal}
	> u, > seg {
		text-decoration: none;
		> .ei, > ei {
			.e;
			position:relative;
		}
		display: inline-block;
		text-align: left;
	}
	.e () {
		display: inline-block;
	}
	.b () {
		display: block;
		white-space: nowrap;
	}
	.h, hd {
		display: none;
	}

	.bb, .bo {
		.e;
		transform-origin: 50% 50%;
		-webkit-transform-origin: 50% 50%;
		-moz-transform-origin: 50% 50%;
		-ms-transform-origin: 50% 50%;
		-o-transform-origin: 50% 50%;
	}
	.fb, frac, stack {
		.e;
		vertical-align: middle;
		> .num, > .den, > .fdv, num, den, fdv {
			.b;
			position: relative;
		}
		> .num, > .den, num, den {
			text-align: center;
		}
		> .fdv, fdv {
			height: 1px;
			background: black;
			overflow: hidden;
			margin: -1px 0 0 0;
		}
	}

	.fb, frac {
		> .num, > .den, num, den {
			padding: 0 0.2em;
		}
	}

	.sqrt, sqrt {
		display: inline-block;
		padding-left: 1em;
		position: relative;
		&:before {
			content: ' ';
			display: block;
			position: absolute;
			top: -1px;
			left: 0;
			bottom: 0;
			width: 1em;
			background: url(../font/sqrt.svg);
			background-size: 1em 100%;
			background-position: left top;
			background-repeat: no-repeat;
		}
		.i, sk {
			.e;
			display: inline-block;
			border-top: 1px solid black;
			margin-top: -1px;
		}
	}

	.sg, sg {
		.e;
		> .ss, ss {
			.e;
			vertical-align: top;
			height: 0;
			position: relative;
			> .ssi, ssi {
				display: block;
				text-align: left;
				position: relative;
				> sup, > sub {
					.b;
					font-size: 1em;
					display: block;
					vertical-align: baseline;
					text-align: left;
					position: relative;
					op, .op {
						margin: 0;
					}
				}
			}
		}
	}
	.sc, sc {
		.e;
		vertical-align: middle;
	}
	sp, .sp {
		white-space: pre-wrap;
	}
	e.db-overline {
		position: relative;
		&:before {
			display: block;
			content: ' ';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 1px;
			background: black
		}
	}
	e.db-underline {
		position: relative;
		&:before {
			display: block;
			content: ' ';
			position: absolute;
			bottom: 0;
			left: 0;
			right: 0;
			height: 1px;
			background: black
		}
	}
	e.db-red { color: red }
	e.db-green { color: green }
	e.db-blue { color: blue }
	code {
		color: #900;
	}
	eb {
		display: block;
		height: 0;
		width: 0;
		opacity: 0;
	}
	r {
		display: inline-block;
		position: relative;
		> ri {
			position: relative;
			display: block;
			height: 0;
			> fl {
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				height: 0.05em;
				min-height: 1px;
				background: black;
				overflow: hidden;
			}
		}
	}
	r.frac > ri{
		text-align: center;
		padding-left: 0.2em;
		padding-right: 0.2em;
	}
	r.sss > ri, r.mc > ri, r.mcc > ri {
		text-align: center
	}
	r.mcl > ri {
		text-align: left;
	}
	r.mcr > ri {
		text-align: right
	}
	r.ss sp { display: none }

	.big { font-feature-settings: 'ss01'; -webkit-font-feature-settings: 'ss01' }
	.bigg { font-feature-settings: 'ss02'; -webkit-font-feature-settings: 'ss02' }
 }

div.eqn-display {
	.parag;
	text-align: center;
	> .eqn-display-i {
		text-align: left;
		display: inline-block;
	}
}
table.eqn-align {
	.parag;
	margin-left: auto;
	margin-right: auto;
	min-width: 0;
	box-shadow: none;
	border: none;
	td {
		padding: 0 0.2em;
		vertical-align: top;
	}
}